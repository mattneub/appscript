<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

<title>aemreceive tutorial | 2. Creating the application</title>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<style type="text/css" media="all"><!--@import url(full.css);--></style>

</head>
<body>

<h1>2. Creating the application</h1>

<!-- top navigation -->
<div class="navbar">
	<a href="01_tutorial_introduction.html">Previous</a> | <a href="00_tutorial_index.html">Up</a> | <a href="03_tutorial_step2.html">Next</a>
	
</div>

<!-- content -->
<div id="content">
<p>The basic structure of the MiniTC FBA is extremely simple:</p>

<ol>
<li>import aemreceive's <code>sfba</code> module</li>
<li>define and install its event handlers</li>
<li>start the application's main event loop.</li>
</ol>

<p>Using TextEdit, TextWrangler or other suitable editor, create the following Python script:</p>

<pre><code>from aemreceive.sfba import *

# eventhandlers to go here

starteventloop()</code></pre>

<p>Importing the <code>sfba</code> module provides functions for starting and stopping the application's main event loop, along with the contents of the aemreceive module for your convenience. Next, the application's event handlers are defined and installed. Once initialisation is complete, the <code>starteventloop()</code> function is called to begin handling incoming Apple events.</p>

<p>Save the above script as <code>Tutorial/MiniTC.py</code>. Switch to Terminal.app, cd to the tutorial folder and run:</p>

<pre><code>python setup.py py2app</code></pre>

<p>This will run <code>sdp</code> and <code>Rez</code> to create a <code>.rsrc</code> file containing the MiniTC dictionary, followed by <code>distutils</code> and <code>py2app</code>, which will gather <code>MiniTC.py</code> and all its dependencies and create a MiniTC.app bundle in the <code>Tutorial/dist</code> folder.</p>

<p>The sfba framework automatically installs default event handlers for run and quit events, allowing you to run and quit the MiniTC application without writing any additional code. Try it now.</p>


<h2>Tips</h2>

<ul>
<li><p>Remember, when making changes to <code>MiniTC.py</code>, you'll need to quit, rebuild and restart MiniTC in order for those changes to take effect. However, you can use py2app's <code>--alias</code> option during development to avoid the lengthy rebuild step:</p>

<pre><code>python setup.py py2app --alias</code></pre>

<p>This will create a stripped-down, non-portable version of MiniTC that links to your existing files instead of including them in the application bundle. You'll still need to quit and restart after modifying <code>MiniTC.py</code> for those changes to take effect, of course. Don't forget to clean and build a full version of MiniTC before distribution.</p></li>

<li>During development, you may find it helpful to build a non-faceless version of MiniTC so that it's visible in the Dock while running and can be easily quit using <code>Cmd-Q</code>.</li>

<li>When testing MiniTC, it is useful to have Console.app's main Console window visible as aemreceive will often print warnings and detailed error descriptions to stderr when problems occur.</li>
</ul>
</div>

<!-- bottom navigation -->
<div class="navbar">
	<a href="01_tutorial_introduction.html">Previous</a> | <a href="00_tutorial_index.html">Up</a> | <a href="03_tutorial_step2.html">Next</a>
	
</div>

<!--footer-->
<p class="footer">&copy; 2005 HAS</p>
</body>
</html>